(()=>{"use strict";var e={706:(e,t,s)=>{s.d(t,{Z:()=>a});var n=s(81),o=s.n(n),r=s(645),i=s.n(r)()(o());i.push([e.id,":root {\n  --bg-color: #DEE1E6;\n  --head-color: #FF4A41;\n  --body-color: #00D600;\n  --food-color: #51ABFE;\n  --border-color: #B4B4FF;\n  --bg-color-theme1: #35FFFF;\n  --head-color-theme1: #FC5633;\n  --body-color-theme1: #F0AD4E;\n  --food-color-theme1: #D71C1B;\n  --border-color-theme1: #00A1DD;\n  --bg-color-theme2: #F6D04D;\n  --head-color-theme2: #263859;\n  --body-color-theme2: #FF6768;\n  --food-color-theme2: #78FEE0;\n  --border-color-theme2: #41B6E6;\n}\nbody #gl-snake {\n  position: relative;\n  box-sizing: border-box;\n  font: bold 20px 'Courier';\n  user-select: none;\n  width: 360px;\n  height: 390px;\n  background-color: var(--bg-color);\n  margin: 0 auto;\n  border: 8px solid var(--border-color);\n  border-radius: 25px;\n  display: flex;\n  flex-flow: column;\n  align-items: center;\n  justify-content: center;\n}\nbody #gl-snake * {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\nbody #gl-snake.theme1 {\n  --bg-color: var(--bg-color-theme1);\n  --head-color: var(--head-color-theme1);\n  --body-color: var(--body-color-theme1);\n  --food-color: var(--food-color-theme1);\n  --border-color: var(--border-color-theme1);\n}\nbody #gl-snake.theme2 {\n  --bg-color: var(--bg-color-theme2);\n  --head-color: var(--head-color-theme2);\n  --body-color: var(--body-color-theme2);\n  --border-color: var(--border-color-theme2);\n  --food-color: var(--food-color-theme2);\n}\nbody #gl-snake .stage {\n  width: 304px;\n  height: 304px;\n  border: 2px solid black;\n  position: relative;\n}\nbody #gl-snake .stage .snake {\n  width: 0;\n  height: 0;\n}\nbody #gl-snake .stage .snake > div {\n  width: 10px;\n  height: 10px;\n  border: 1px solid var(--bg-color);\n  background-color: var(--body-color);\n  position: absolute;\n}\nbody #gl-snake .stage .snake > div:nth-child(1) {\n  background-color: var(--head-color);\n  border-radius: 3px;\n  z-index: 2;\n}\nbody #gl-snake .stage .food {\n  width: 10px;\n  height: 10px;\n  position: absolute;\n  display: flex;\n  flex-flow: row wrap;\n  justify-content: space-between;\n  align-content: space-between;\n}\nbody #gl-snake .stage .food > div {\n  transform: rotate(45deg);\n  width: 4px;\n  height: 4px;\n  background-color: var(--food-color);\n}\nbody #gl-snake .score-panel {\n  width: 300px;\n  display: flex;\n  flex-flow: row;\n  justify-content: space-between;\n}\nbody #gl-snake .message {\n  position: absolute;\n  width: fit-content;\n  left: 50%;\n  top: 45%;\n  color: var(--head-color);\n  transform: translate(-50%, -50%);\n  display: none;\n  background-color: #45fa13;\n  box-sizing: unset;\n  border-radius: 3px;\n}\nbody #gl-snake .message.show {\n  display: block;\n}\n",""]);const a=i},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",n=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),n&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),n&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,n,o,r){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(n)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(i[l]=!0)}for(var h=0;h<e.length;h++){var c=[].concat(e[h]);n&&i[c[0]]||(void 0!==r&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=r),s&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=s):c[2]=s),o&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=o):c[4]="".concat(o)),t.push(c))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function s(e){for(var s=-1,n=0;n<t.length;n++)if(t[n].identifier===e){s=n;break}return s}function n(e,n){for(var r={},i=[],a=0;a<e.length;a++){var l=e[a],h=n.base?l[0]+n.base:l[0],c=r[h]||0,d="".concat(h," ").concat(c);r[h]=c+1;var m=s(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==m)t[m].references++,t[m].updater(f);else{var u=o(f,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:u,references:1})}i.push(d)}return i}function o(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,o){var r=n(e=e||[],o=o||{});return function(e){e=e||[];for(var i=0;i<r.length;i++){var a=s(r[i]);t[a].references--}for(var l=n(e,o),h=0;h<r.length;h++){var c=s(r[h]);0===t[c].references&&(t[c].updater(),t.splice(c,1))}r=l}}},569:e=>{var t={};e.exports=function(e,s){var n=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(s)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var n="";s.supports&&(n+="@supports (".concat(s.supports,") {")),s.media&&(n+="@media ".concat(s.media," {"));var o=void 0!==s.layer;o&&(n+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),n+=s.css,o&&(n+="}"),s.media&&(n+="}"),s.supports&&(n+="}");var r=s.sourceMap;r&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,exports:{}};return e[n](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.nc=void 0,(()=>{var e=s(379),t=s.n(e),n=s(795),o=s.n(n),r=s(569),i=s.n(r),a=s(565),l=s.n(a),h=s(216),c=s.n(h),d=s(589),m=s.n(d),f=s(706),u={};u.styleTagTransform=m(),u.setAttributes=l(),u.insert=i().bind(null,"head"),u.domAPI=o(),u.insertStyleElement=c(),t()(f.Z,u),f.Z&&f.Z.locals&&f.Z.locals;class p{constructor(e){const t=document.createElement("div");t.classList.add("food"),t.innerHTML="<div></div><div></div><div></div><div></div>",e.appendChild(t),this.element=t,this.element.style.left=10*Math.floor(30*Math.random())+"px",this.element.style.top=10*Math.floor(30*Math.random())+"px"}get X(){return this.element.offsetLeft}get Y(){return this.element.offsetTop}changeXY(){let e=10*Math.floor(30*Math.random()),t=10*Math.floor(30*Math.random());this.element.style.left=e+"px",this.element.style.top=t+"px"}noConflictXY(e){let t=e[Math.floor(Math.random()*e.length)];this.element.style.left=10*t[0]+"px",this.element.style.top=10*t[1]+"px"}reset(){this.changeXY()}}class v{constructor(e){this.score=0,this.level=1,this.MAX_LEVEL=10,this.UP_SCORE=3,this.scoreEle=e.querySelector("#score"),this.levelEle=e.querySelector("#level")}addScore(){this.scoreEle.innerHTML=++this.score+"",this.score%this.UP_SCORE==0&&this.level<this.MAX_LEVEL&&this.levelUp()}levelUp(){this.level<this.MAX_LEVEL&&(this.levelEle.innerHTML=++this.level+"")}reset(){this.score=0,this.scoreEle.innerHTML=this.score+"",this.level=1,this.levelEle.innerHTML=this.level+""}}class g{constructor(e){this.isLive=!0,this.speed=250,this.lastTime=(new Date).getTime(),this.direction="ArrowRight";const t=document.createElement("div"),s=document.createElement("div");t.classList.add("snake"),this.snakeElement=t,this.headElement=s,this.bodiesElements=t.getElementsByTagName("div"),t.appendChild(s),e.appendChild(t)}get X(){return this.headElement.offsetLeft}get Y(){return this.headElement.offsetTop}set X(e){this.X!==e&&(e<0||e>290?this.isLive=!1:(this.bodiesElements[1]&&this.bodiesElements[1].offsetLeft===e&&(e=e>this.X?this.X-10:this.X+10),this._moveBody(),this.headElement.style.left=e+"px",this._checkHeadBody()))}set Y(e){this.Y!==e&&(e<0||e>290?this.isLive=!1:(this.bodiesElements[1]&&this.bodiesElements[1].offsetTop===e&&(e=e>this.Y?this.Y-10:this.Y+10),this._moveBody(),this.headElement.style.top=e+"px",this._checkHeadBody()))}addBody(){let e=this.bodiesElements[this.bodiesElements.length-1],t=e.offsetLeft+"px",s=e.offsetTop+"px";this.snakeElement.insertAdjacentHTML("beforeend",`<div style="left:${t};top: ${s} "></div>`)}_moveBody(){for(let e=this.bodiesElements.length-1;e>0;e--){let t=this.bodiesElements[e-1].offsetLeft,s=this.bodiesElements[e-1].offsetTop;this.bodiesElements[e].style.left=t+"px",this.bodiesElements[e].style.top=s+"px"}}_checkHeadBody(){for(let e=1;e<this.bodiesElements.length;e++)this.X===this.bodiesElements[e].offsetLeft&&this.Y===this.bodiesElements[e].offsetTop&&(this.isLive=!1)}judge(){let e=(new Date).getTime();if(e-this.lastTime>this.speed){switch(this.direction){case"ArrowUp":case"Up":this.Y-=10;break;case"ArrowDown":case"Down":this.Y+=10;break;case"ArrowLeft":case"Left":this.X-=10;break;case"ArrowRight":case"Right":this.X+=10}this.lastTime=e}}reset(){for(const e of this.snakeElement.querySelectorAll("div:not(:first-child)"))e.remove();this.X=0,this.Y=0,this.speed=250,this.isLive=!0,this.direction="ArrowRight"}snakeCoordinateArray(){let e=[];for(let t=0;t<30;t++){let s=[];e.push(s);for(let s=0;s<30;s++)e[t].push([t,s])}for(let t of this.bodiesElements){let s=t.offsetTop/10,n=t.offsetLeft/10;e[s][n]=null}return e=e.reduce((function(e,t){return e.concat(t)})),e.filter((e=>e))}}class b{constructor(e){this.MessageElement=e}get msg(){return this.MessageElement.innerHTML}set msg(e){null!==e&&""!==e?(this.MessageElement.classList.add("show"),this.MessageElement.innerHTML=e):(this.MessageElement.classList.remove("show"),this.MessageElement.innerHTML="")}msgTime(e,t=2e3){this.msg=e,setTimeout((()=>{this.MessageElement.classList.remove("show"),this.MessageElement.innerHTML=""}),t)}}class E{constructor(e){this.CONTAINERUI='<div id="gl-snake">\x3c!-- 游戏的舞台 --\x3e<div class="stage"></div>\x3c!-- 游戏计分板 --\x3e<div class="score-panel"><div><span>SCORE：</span><span id="score">0</span></div><div><span>LEVEL：</span><span id="level">1</span></div></div><div class="message"></div></div>',this.REFRESHRATE=10,this.MSGMAP={END:"GAME OVER！",PAUSE:"GAME PAUSE！",EMPTY:"",VICTORY:"GAME VICTORY！"},this.gameStatus=0,this._keyDownHandler=e=>{switch(e.key){case"ArrowUp":case"Up":case"ArrowDown":case"Down":case"ArrowLeft":case"Left":case"ArrowRight":case"Right":this.snake.direction=e.key}},this.containerElement=e,this.containerElement.innerHTML=this.CONTAINERUI,this.snakeGameElement=this.containerElement.querySelector("#gl-snake"),this.snake=new g(this.snakeGameElement.querySelector(".stage")),this.food=new p(this.snakeGameElement.querySelector(".stage")),this.scorePanel=new v(this.snakeGameElement.querySelector(".score-panel")),this.message=new b(this.snakeGameElement.querySelector(".message"))}_refreshGame(){let e=setInterval((()=>{E._checkEat(this.snake.X,this.snake.Y,this.food.X,this.food.Y)&&this._checkedHandler(),this.snake.judge(),this.snake.isLive&&3!==this.gameStatus||(clearInterval(e),this._death()),0!==this.gameStatus&&2!==this.gameStatus||clearInterval(e),4===this.gameStatus&&(clearInterval(e),this.message.msg=this.MSGMAP.VICTORY)}),this.REFRESHRATE)}static _checkEat(e,t,s,n){return e===s&&t===n}_init(){this.gameStatus=1,this.message.msg=this.MSGMAP.EMPTY,document.addEventListener("keydown",this._keyDownHandler),this._refreshGame()}_death(){this.snake.isLive=!1,this.gameStatus=3,this.message.msg=this.MSGMAP.END,document.removeEventListener("keydown",this._keyDownHandler)}_checkedHandler(){let e=this.snake.snakeCoordinateArray();e.length<=1&&(this.gameStatus=4),this.food.noConflictXY(e),this.scorePanel.addScore(),this.snake.speed=250-10*(this.scorePanel.level-1),this.snake.addBody()}start(){0!==this.gameStatus&&2!==this.gameStatus||this._init()}pause(){this.gameStatus=2,this.message.msg=this.MSGMAP.PAUSE,document.removeEventListener("keydown",this._keyDownHandler)}reset(){this.gameStatus=0,this.message.msg=this.MSGMAP.EMPTY,this.snake.reset(),this.food.reset(),this.scorePanel.reset(),document.removeEventListener("keydown",this._keyDownHandler)}changeTheme(e=0){switch(e){case 0:this.snakeGameElement.setAttribute("class","");break;case 1:this.snakeGameElement.setAttribute("class","theme1");break;case 2:this.snakeGameElement.setAttribute("class","theme2")}}}!function(e){function t(e){const t=document.querySelector(e);if(t)return new E(t);console.error(`选择器有误,${e}不存在`)}t.help=function(){return"SnakeGame是一个封装后的贪吃蛇游戏,是提供操作DOM来进行游戏\n    1. 通过let snakeGame = new window.SnakeGame('选择器')绑定到一个DOM元素中\n    2. snakeGame拥有的函数: start()启动函数\n    3. snakeGame拥有的函数: pause()暂停函数\n    4. snakeGame拥有的函数: reset()重置游戏\n    5. snakeGame拥有的函数: theme(number)游戏主题(0,1,2)三个主题"},e.SnakeGame=t}(window)})()})();